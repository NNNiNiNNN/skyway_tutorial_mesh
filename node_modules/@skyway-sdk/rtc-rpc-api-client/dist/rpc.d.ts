/// <reference types="ws" />
import { SkyWayError } from '@skyway-sdk/common';
import WebSocket from 'isomorphic-ws';
export declare class RPC {
    /**@private */
    _ws: WebSocket;
    closed: boolean;
    connected: boolean;
    reconnecting: boolean;
    private _reconnectCount;
    private readonly _reconnectLimit;
    private _pendingRequests;
    /**bytes */
    received: number;
    private readonly _events;
    private readonly _onMessage;
    readonly onNotify: import("@skyway-sdk/common").Event<{
        method: string;
        params: object;
    }>;
    readonly onFatalError: import("@skyway-sdk/common").Event<SkyWayError<Record<string, any>>>;
    readonly onReconnect: import("@skyway-sdk/common").Event<void>;
    connect({ domain, token, secure, }: {
        domain: string;
        token: string;
        secure: boolean;
    }): Promise<void>;
    private reconnect;
    close(): void;
    private _send;
    /**
     * @throws {@link RpcResponseError}
     * @throws {@link ReconnectHappenedError}
     */
    request<Result extends object>(method: string, params: {
        [key: string]: any;
        appId: string;
        authToken: string;
    }): Promise<object & Result>;
    notify(method: string, params: object): Promise<void>;
    batch<Result extends object>(requests: {
        method: string;
        params: object;
    }[]): Promise<(ResponseMessage & {
        result: Result;
    })[]>;
}
interface ResponseMessage {
    jsonrpc: '2.0';
    result: object;
    error?: ResponseError;
    id: string;
}
export interface ResponseError {
    code: number;
    message: string;
    data: object;
}
export declare class ReconnectHappenedError extends SkyWayError {
    constructor();
}
export declare class RpcResponseError extends SkyWayError<ResponseError> {
    constructor(payload: ResponseError);
}
export {};
//# sourceMappingURL=rpc.d.ts.map